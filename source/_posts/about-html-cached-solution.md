---
title: 关于html热更新缓存的一些想法
date: 2018-02-08 14:01:45
tags: [html, localStorage]
categories: [灵感, 想法]
---

<!-- more --> 

看到一篇文章[前端页面热更新实现方案](https://juejin.im/entry/5a7a70c5f265da4e8d42efe8?utm_medium=fe&utm_source=weixinqun)提到所有代码都将存进localStorage到提高加载效率，
先完成一个壳，壳里面不涉及业务代码，只实现热更新功能。每次加载都先检查localStorage中是否存在模板，如果有则立即应用模板，此时页面展现出来，如果没有则进入下一步；下一步页面会请求模板管理接口获取最新模板信息，拿到模板信息后如果本地已有模板，则与本地模板比对版本信息，如果版本一致说明缓存命中，流程结束；如果本地版本不是最新，则获取最新模板并存进本地，下次页面加载时将应用最新的模板，流程结束；另一种情况是首次加载本地没有任何模板，那么将获取最新模板，保存到本地，然后应用模板，流程结束。

前面说的是稳定模板的更新流程，稳定模板流程结束后会进入补丁模板更新流程。首先仍然是检查本地是否存在补丁模板，如果已存在则检测当前时间是否匹配补丁的生效时段，匹配则应用补丁，不匹配将进入下一步；下一步将获取最新补丁模板并存到本地，然后检测当前时间是否匹配最新补丁的生效时段，如果匹配则应用模板，不匹配流程结束。

那有没有可能创建一个静态文件，文件里面只是一些相关配置。链接到某一个模块，文件放到桌面上相当于发送一个图标到桌面，点击图标直接跳转到相应模块。

测试中... 